%D \module
%D   [       file=syst-str,
%D        version=2006.09.18,
%D          title=\CONTEXT\ System Macros,
%D       subtitle=String Processing,
%D         author=Hans Hagen,
%D           date=\currentdate,
%D      copyright={PRAGMA / Hans Hagen \& Ton Otten}]
%C
%C This module is part of the \CONTEXT\ macro||package and is
%C therefore copyrighted by \PRAGMA. See mreadme.pdf for
%C details.

\unprotect

% todo: escape special chars in expr (\luaescapeexpression)

\def\replacecharacters#1#2#3% macro characters replacement
  {\dodoglobal\edef#1{\ctxlua{tex.sprint((string.gsub("#1",string.esc(#2),"#3")))}}}

\def\separatestring#1\to#2%
  {\dodoglobal\def#2{\ctxlua{tex.sprint(string.gsub(("#1","\letterpercent s+",","))})}}

\def\unspacefilename#1\to#2%
  {\dodoglobal\def#2{\ctxlua{tex.sprint(string.gsub(("#1","\letterpercent s+","-")))}}}

\protect \endinput
