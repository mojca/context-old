%D \module
%D   [       file=char-def,
%D        version=2005.04.25,
%D          title=\CONTEXT\ Lua Macros,
%D       subtitle=Unicode Support,
%D         author=Hans Hagen,
%D           date=\currentdate,
%D      copyright=PRAGMA]
%C
%C This module is part of the \CONTEXT\ macro||package and is
%C therefore copyrighted by \PRAGMA. See mreadme.pdf for
%C details.

\writestatus{loading}{Unicode Support (tables)}

\unprotect

%D An auxiliary macro:

\def\setcclcuc #1 #2 #3 %
  {\global\catcode#1=11 %
   \global\lccode #1=#2 %
   \global\uccode #1=#3 }

\registerctxluafile{char-def}{1.001}
\registerctxluafile{char-map}{1.001}
\registerctxluafile{char-syn}{1.001}

%D The codes are stored in the format, so we don't need to reinitialize
%D them (unless of course we have adapted the table).

\ctxlua{characters.setcodes()}

% \startruntimeluacode
%   \ctxlua{characters.setpdfunicodes()}% pdftounicode mappings can only be done runtime
% \stopruntimeluacode

%D There may be a problem with the turkisch patterns. By now it's taken care of in
%D ctxtools (thanks to Mojca). There seems to be a bug in the patterns (^^11 refers
%D to a double quote but it should be ^^19 since the original is in ec encoding).

% \setcclcuc "201C "201C "201C
% \setcclcuc "201D "201D "201D

\protect \endinput

% \ctxlua{characters.context.show(123)}
% \ctxlua{characters.context.show(0x7B)}
% \ctxlua{characters.context.show("7B")}

% \dostepwiserecurse{`A}{`Z}{1}
%   {\ctxlua{characters.context.show(\recurselevel)}}
